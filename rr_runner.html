<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>RR Runner ‚Äì RR Events App</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- GOOGLE ANALYTICS -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-9JW1V42V83"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-9JW1V42V83', {
  page_title: 'RR Runner',
  page_path: '/rr_runner.html'
});
</script>

<style>
*{box-sizing:border-box;-webkit-tap-highlight-color:transparent;}
body{
    margin:0;
    font-family:'Segoe UI',Arial,sans-serif;
    background:#0f1117;
    color:#fff;
    text-align:center;
}

/* HEADER */
.header{
    background:linear-gradient(90deg,#ff512f,#dd2476);
    padding:18px;
}
.header h1{margin:0;font-size:26px;}
.header p{margin-top:6px;opacity:.85}

/* GAME AREA */
#game{
    position:relative;
    width:100%;
    max-width:360px;
    height:420px;
    margin:18px auto;
    background:#161a22;
    border-radius:16px;
    overflow:hidden;
    box-shadow:0 0 22px rgba(0,0,0,.7);
}

/* PLAYER */
#player{
    position:absolute;
    bottom:20px;
    left:40px;
    width:36px;
    height:36px;
    background:#4fc3f7;
    border-radius:8px;
}

/* OBSTACLE */
.obstacle{
    position:absolute;
    bottom:20px;
    width:32px;
    height:32px;
    background:#ff5252;
    border-radius:6px;
}

/* HUD */
.hud{
    display:flex;
    justify-content:space-around;
    margin-top:10px;
    font-size:14px;
}
.hud span b{color:#ff9800}

/* BUTTONS */
.btn{
    width:80%;
    max-width:280px;
    padding:14px;
    font-size:16px;
    font-weight:600;
    border:none;
    border-radius:12px;
    cursor:pointer;
    margin-top:14px;
    color:#fff;
}
.btn-restart{
    background:linear-gradient(90deg,#ff9800,#ff6a00);
}
.btn-back{
    background:#34495e;
}

/* GAME OVER */
#gameOver{
    position:absolute;
    inset:0;
    background:rgba(0,0,0,.8);
    display:none;
    flex-direction:column;
    justify-content:center;
    align-items:center;
}
#gameOver h2{margin-bottom:10px}
</style>
</head>

<body>

<div class="header">
    <h1>üèÉ RR Runner</h1>
    <p>Run ‚Ä¢ Jump ‚Ä¢ Survive</p>
</div>

<div class="hud">
    <span>üìè Score: <b id="score">0</b> m</span>
    <span>üèÜ Best: <b id="best">0</b> m</span>
</div>

<div id="game">
    <div id="player"></div>

    <div id="gameOver">
        <h2>üí• Game Over</h2>
        <p>Your Score: <b id="finalScore"></b> m</p>
        <button class="btn btn-restart" onclick="restart()">üîÅ Play Again</button>
    </div>
</div>

<button class="btn btn-back" onclick="location.href='tictactoe.html'">
‚¨Ö Back to Games
</button>

<script>
const game = document.getElementById("game");
const player = document.getElementById("player");
const scoreEl = document.getElementById("score");
const bestEl = document.getElementById("best");
const gameOverBox = document.getElementById("gameOver");
const finalScoreEl = document.getElementById("finalScore");

let jumping=false;
let gravity=0;
let score=0;
let speed=3;
let gameRunning=true;

let bestScore = localStorage.getItem("rr_best") || 0;
bestEl.innerText = bestScore;

/* JUMP */
function jump(){
    if(jumping) return;
    jumping=true;
    gravity=12;
    gtag('event','rr_jump');
}

/* TOUCH / TAP */
game.addEventListener("click", jump);

/* CREATE OBSTACLE */
function createObstacle(){
    const obs=document.createElement("div");
    obs.className="obstacle";
    obs.style.left="360px";
    game.appendChild(obs);

    let move=setInterval(()=>{
        if(!gameRunning){
            clearInterval(move);
            obs.remove();
            return;
        }

        let left=parseInt(obs.style.left);
        obs.style.left=(left-speed)+"px";

        /* COLLISION */
        const pRect=player.getBoundingClientRect();
        const oRect=obs.getBoundingClientRect();

        if(
            oRect.left < pRect.right &&
            oRect.right > pRect.left &&
            oRect.bottom > pRect.top
        ){
            endGame();
        }

        if(left < -40){
            clearInterval(move);
            obs.remove();
            score+=10;
            scoreEl.innerText=score;
        }
    },20);
}

/* GAME LOOP */
let obstacleTimer=setInterval(()=>{
    if(gameRunning) createObstacle();
},1500);

function loop(){
    if(!gameRunning) return;

    if(jumping){
        gravity--;
        let bottom=parseInt(player.style.bottom||"20");
        player.style.bottom=(bottom+gravity)+"px";
        if(bottom<=20){
            jumping=false;
            gravity=0;
            player.style.bottom="20px";
        }
    }

    requestAnimationFrame(loop);
}
loop();

/* END GAME */
function endGame(){
    gameRunning=false;
    clearInterval(obstacleTimer);
    finalScoreEl.innerText=score;
    gameOverBox.style.display="flex";

    if(score>bestScore){
        bestScore=score;
        localStorage.setItem("rr_best",bestScore);
        bestEl.innerText=bestScore;
        gtag('event','rr_new_highscore',{score:score});
    }

    gtag('event','rr_game_over',{score:score});
}

/* RESTART */
function restart(){
    location.reload();
}
</script>

</body>
</html>