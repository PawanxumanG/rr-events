<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>RR Runner ‚Äì RR Events App</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- GOOGLE ANALYTICS -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-9JW1V42V83"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config','G-9JW1V42V83',{
  page_title:'RR Runner',
  page_path:'/rr_runner.html'
});
</script>

<style>
*{box-sizing:border-box;}
body{
    margin:0;
    background:#0f1117;
    color:#fff;
    font-family:'Segoe UI',Arial,sans-serif;
    text-align:center;
    user-select:none;
}

/* HEADER */
.header{
    background:linear-gradient(90deg,#ff512f,#dd2476);
    padding:18px;
}
.header h1{
    margin:0;
    font-size:26px;
}
.header p{
    margin-top:6px;
    opacity:.9;
}

/* SCORE BAR */
.score-bar{
    display:flex;
    justify-content:space-around;
    padding:12px;
    font-size:15px;
    background:#161a22;
}

/* GAME AREA */
#gameBox{
    width:100%;
    max-width:380px;
    margin:16px auto;
    background:linear-gradient(180deg,#1b1f2a,#0f1117);
    border-radius:16px;
    box-shadow:0 0 25px rgba(0,0,0,.7);
    position:relative;
    overflow:hidden;
}

/* PLAYER */
#player{
    width:36px;
    height:36px;
    background:linear-gradient(135deg,#00c6ff,#0072ff);
    border-radius:8px;
    position:absolute;
    bottom:16px;
    left:40px;
}

/* OBSTACLE */
.obstacle{
    width:30px;
    height:30px;
    background:linear-gradient(135deg,#ff9800,#ff5722);
    border-radius:6px;
    position:absolute;
    bottom:16px;
}

/* GAME OVER */
#gameOver{
    position:absolute;
    inset:0;
    background:rgba(0,0,0,.85);
    display:none;
    align-items:center;
    justify-content:center;
    flex-direction:column;
}
#gameOver h2{margin:0;}
#gameOver button{
    margin-top:12px;
    padding:12px 20px;
    border:none;
    border-radius:12px;
    font-size:15px;
    font-weight:600;
    background:linear-gradient(90deg,#ff9800,#ff6a00);
    color:#fff;
    cursor:pointer;
}

/* BACK BUTTON */
.back-btn{
    width:80%;
    max-width:260px;
    margin:18px auto 90px;
    padding:14px;
    font-size:16px;
    font-weight:600;
    border:none;
    border-radius:12px;
    background:#34495e;
    color:#fff;
    cursor:pointer;
}
</style>
</head>

<body>

<div class="header">
    <h1>üèÉ RR Runner</h1>
    <p>Run ‚Ä¢ Jump ‚Ä¢ Survive</p>
</div>

<div class="score-bar">
    <div>üìè Score: <span id="score">0</span> m</div>
    <div>üèÜ Best: <span id="best">0</span> m</div>
</div>

<div id="gameBox">
    <div id="player"></div>

    <div id="gameOver">
        <h2>üí• Game Over</h2>
        <p>Tap restart to try again</p>
        <button onclick="restartGame()">üîÅ Restart</button>
    </div>
</div>

<button class="back-btn" onclick="location.href='tictactoe.html'">
    ‚¨Ö Back to Games
</button>

<script>
const gameBox = document.getElementById("gameBox");
const player = document.getElementById("player");
const scoreEl = document.getElementById("score");
const bestEl = document.getElementById("best");
const gameOverEl = document.getElementById("gameOver");

let gravity = 0.9;
let jumpPower = -14;
let velocity = 0;
let isJumping = false;
let score = 0;
let speed = 3;
let gameRunning = true;

let bestScore = localStorage.getItem("rr_runner_best") || 0;
bestEl.innerText = bestScore;

/* TAP ANYWHERE TO JUMP */
gameBox.addEventListener("click", jump);
document.body.addEventListener("click", jump);

function jump(){
    if(!isJumping && gameRunning){
        velocity = jumpPower;
        isJumping = true;
    }
}

function spawnObstacle(){
    if(!gameRunning) return;
    const obs = document.createElement("div");
    obs.className = "obstacle";
    obs.style.left = gameBox.clientWidth + "px";
    gameBox.appendChild(obs);

    let move = setInterval(()=>{
        if(!gameRunning){
            clearInterval(move);
            obs.remove();
            return;
        }

        let x = parseInt(obs.style.left);
        obs.style.left = (x - speed) + "px";

        // Collision
        const pRect = player.getBoundingClientRect();
        const oRect = obs.getBoundingClientRect();

        if(
            pRect.left < oRect.right &&
            pRect.right > oRect.left &&
            pRect.bottom > oRect.top
        ){
            endGame();
            clearInterval(move);
            obs.remove();
        }

        if(x < -40){
            clearInterval(move);
            obs.remove();
        }
    },20);
}

function gameLoop(){
    if(!gameRunning) return;

    velocity += gravity;
    let bottom = parseInt(player.style.bottom || 16);
    bottom -= velocity;

    if(bottom <= 16){
        bottom = 16;
        isJumping = false;
        velocity = 0;
    }

    player.style.bottom = bottom + "px";

    score++;
    scoreEl.innerText = score;

    if(score > bestScore){
        bestScore = score;
        bestEl.innerText = bestScore;
        localStorage.setItem("rr_runner_best", bestScore);
    }

    requestAnimationFrame(gameLoop);
}

function endGame(){
    gameRunning = false;
    gameOverEl.style.display = "flex";
    gtag('event','rr_runner_game_over',{score:score});
}

function restartGame(){
    location.reload();
}

/* START */
setInterval(spawnObstacle,1500);
gameLoop();
gtag('event','rr_runner_start');
</script>

</body>
</html>