<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Event Album â€“ RR International College</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="style.css">

<!-- ================= GOOGLE ANALYTICS ================= -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-9JW1V42V83"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config','G-9JW1V42V83',{
  page_title:'Event Album',
  page_path:'/event_album.html'
});
</script>
<!-- =================================================== -->

<style>
.poster-box{
    background:#161a22;
    border-radius:14px;
    padding:14px;
    margin-bottom:16px;
    text-align:center;
    box-shadow:0 0 18px rgba(0,0,0,.6);
}
.poster-box img{
    width:100%;
    border-radius:12px;
    margin-top:8px;
}

.download-btn{
    margin-top:12px;
    display:inline-block;
    padding:10px 18px;
    background:linear-gradient(135deg,#f36b21,#ff8c42);
    color:#fff;
    border-radius:999px;
    font-size:14px;
    font-weight:600;
    cursor:pointer;
    box-shadow:0 0 12px rgba(243,107,33,.6);
}

.dialog-overlay{
    display:none;
    position:fixed;
    inset:0;
    background:rgba(0,0,0,.65);
    z-index:999;
    justify-content:center;
    align-items:center;
}
.dialog-box{
    background:#161a22;
    padding:22px;
    border-radius:16px;
    text-align:center;
    width:85%;
    max-width:320px;
}
.dialog-box h3{color:#f36b21;}
.dialog-box input{
    width:100%;
    padding:10px;
    border-radius:10px;
    border:none;
    margin-top:10px;
}
.dialog-box button{
    margin-top:14px;
    padding:10px 22px;
    border:none;
    background:#f36b21;
    color:#fff;
    border-radius:999px;
    font-weight:600;
}
.error{
    color:#ff5252;
    font-size:13px;
    display:none;
}
</style>
</head>

<body>

<div class="header">
    <h1>EVENT ALBUM</h1>
    <p>College Events & Memories</p>
</div>

<div class="container">

<div class="event">
<h2 onclick="trackSection('Formal Day')">ðŸ‘” Formal Day</h2>

<div class="poster-box">
<h3>ðŸ‘¨ Boys Formal</h3>
<img src="boys_formal.jpg" onclick="trackImage('Formal Day - Boys')">
<div class="download-btn" onclick="requestDownload('boys_formal.jpg','Formal_Day_Boys.jpg')">
â¬‡ Download Image
</div>
</div>

<div class="poster-box">
<h3>ðŸ‘© Girls Formal</h3>
<img src="girls_formal.jpg" onclick="trackImage('Formal Day - Girls')">
<div class="download-btn" onclick="requestDownload('girls_formal.jpg','Formal_Day_Girls.jpg')">
â¬‡ Download Image
</div>
</div>
</div>

<div class="event">
<h2 onclick="trackSection('Denim Day')">ðŸ‘– Denim Day</h2>
<div class="poster-box">
<img src="denim.png" onclick="trackImage('Denim Day')">
<div class="download-btn" onclick="requestDownload('denim.png','Denim_Day.jpg')">
â¬‡ Download Image
</div>
</div>
</div>

<button onclick="goBack()" class="nav-btn">â¬… Back to Home</button>
</div>

<!-- PASSWORD POPUP -->
<div class="dialog-overlay" id="passwordDialog">
<div class="dialog-box">
<h3>ðŸ”’ Enter Password</h3>
<input type="password" id="passwordInput" placeholder="Enter download password">
<p class="error" id="passwordError">Wrong password</p>
<button onclick="verifyPassword()">Unlock Download</button>
</div>
</div>

<!-- DOWNLOAD INFO -->
<div class="dialog-overlay" id="downloadDialog">
<div class="dialog-box">
<h3>Download Started</h3>
<p>Check your Downloads folder.</p>
<button onclick="closeDialog()">OK</button>
</div>
</div>

<script>
const DOWNLOAD_PASSWORD = "RR2025"; // ðŸ”‘ CHANGE PASSWORD HERE
let pendingDownload = null;

function requestDownload(url, filename){
    if(sessionStorage.getItem("albumUnlocked")==="yes"){
        startDownload(url, filename);
    }else{
        pendingDownload = {url, filename};
        document.getElementById("passwordDialog").style.display="flex";
    }
}

function verifyPassword(){
    const input = document.getElementById("passwordInput").value;
    if(input === DOWNLOAD_PASSWORD){
        sessionStorage.setItem("albumUnlocked","yes");
        document.getElementById("passwordDialog").style.display="none";
        document.getElementById("passwordError").style.display="none";
        startDownload(pendingDownload.url, pendingDownload.filename);
    }else{
        document.getElementById("passwordError").style.display="block";
    }
}

function startDownload(url, filename){
    const a=document.createElement('a');
    a.href=url;
    a.download=filename;
    document.body.appendChild(a);
    a.click();
    document.body.removeChild(a);

    gtag('event','image_download',{
        event_category:'Event Album',
        event_label:filename
    });

    document.getElementById('downloadDialog').style.display='flex';
}

function closeDialog(){
    document.getElementById('downloadDialog').style.display='none';
}

function trackSection(name){
    gtag('event','album_section_view',{event_label:name});
}
function trackImage(name){
    gtag('event','album_image_click',{event_label:name});
}
function goBack(){ history.back(); }
</script>

</body>
</html>