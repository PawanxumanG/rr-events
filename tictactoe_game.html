<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Tic Tac Toe ‚Äì RR Events App</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- GOOGLE ANALYTICS -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-9JW1V42V83"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-9JW1V42V83', {
  page_title: 'Tic Tac Toe Game',
  page_path: '/tictactoe_game.html'
});
</script>

<style>
*{box-sizing:border-box;-webkit-tap-highlight-color:transparent;}
body{
    margin:0;
    font-family:'Segoe UI',Arial,sans-serif;
    background:#0f1117;
    color:#fff;
    text-align:center;
}

/* HEADER */
.header{
    background:linear-gradient(90deg,#6a11cb,#2575fc);
    padding:22px 12px;
}
.header h1{margin:0;font-size:26px;}
.header p{margin-top:6px;opacity:.85}

/* MODE BUTTON */
.mode-btn{
    background:rgba(0,0,0,.35);
    border:none;
    border-radius:24px;
    padding:10px 22px;
    color:#fff;
    font-size:15px;
    cursor:pointer;
    margin-top:12px;
}

/* AI LEVELS */
.ai-levels{
    display:none;
    justify-content:center;
    gap:14px;
    margin-top:14px;
}
.ai-levels button{
    padding:10px 20px;
    border:none;
    border-radius:22px;
    font-weight:700;
    cursor:pointer;
    color:#fff;
    opacity:.6;
    transition:.25s;
}
.ai-levels button.active{
    opacity:1;
    box-shadow:0 0 18px rgba(255,255,255,.45);
    transform:scale(1.08);
}
.medium{background:#f39c12;}
.hard{background:#e74c3c;}

/* SCOREBOARD */
.scoreboard{
    display:flex;
    justify-content:center;
    gap:16px;
    margin:16px 0;
    font-size:14px;
}
.score{
    background:#161a22;
    padding:10px 14px;
    border-radius:12px;
}

/* STATUS */
.status{
    margin:14px 0;
    font-size:18px;
    font-weight:600;
}

/* BOARD */
.board{
    display:grid;
    grid-template-columns:repeat(3,1fr);
    gap:14px;
    max-width:320px;
    margin:0 auto;
}
.cell{
    background:#161a22;
    border-radius:16px;
    height:90px;
    font-size:42px;
    display:flex;
    align-items:center;
    justify-content:center;
    cursor:pointer;
    box-shadow:0 6px 18px rgba(0,0,0,.6);
}
.cell.X{color:#4fc3f7;}
.cell.O{color:#ffb74d;}
.cell.win{
    background:linear-gradient(135deg,#ff512f,#dd2476);
    box-shadow:0 0 22px rgba(255,81,47,.9);
}

/* BUTTONS */
.btn{
    width:80%;
    max-width:280px;
    padding:14px;
    font-size:16px;
    font-weight:700;
    border:none;
    border-radius:12px;
    cursor:pointer;
    margin-top:16px;
    color:#fff;
}
.btn-restart{background:linear-gradient(90deg,#ff9800,#ff6a00);}
.btn-back{background:#34495e;}
</style>
</head>

<body>

<div class="header">
    <h1>‚ùå ‚≠ï Tic Tac Toe</h1>
    <p>Play ‚Ä¢ Chill ‚Ä¢ Compete</p>

    <!-- MODE SWITCH -->
    <button class="mode-btn" onclick="toggleMode()">
        <span id="modeIcon">ü§ñ</span>
        <span id="modeText">AI Bot</span>
    </button>

    <!-- AI LEVEL BUTTONS -->
    <div class="ai-levels" id="aiLevels">
        <button class="medium active" id="mediumBtn" onclick="setLevel('medium')">Medium</button>
        <button class="hard" id="hardBtn" onclick="setLevel('hard')">Hard</button>
    </div>
</div>

<!-- SCORE -->
<div class="scoreboard">
    <div class="score">üèÜ Wins: <span id="win">0</span></div>
    <div class="score">üíÄ Losses: <span id="loss">0</span></div>
    <div class="score">ü§ù Draws: <span id="draw">0</span></div>
</div>

<div class="status" id="status">Player X Turn</div>
<div class="board" id="board"></div>

<button class="btn btn-restart" onclick="restartGame()">üîÅ Restart Game</button>
<button class="btn btn-back" onclick="location.href='tictactoe.html'">‚¨Ö Back to Games</button>

<script>
const boardEl = document.getElementById("board");
const statusEl = document.getElementById("status");
const aiLevels = document.getElementById("aiLevels");
const modeIcon = document.getElementById("modeIcon");
const modeText = document.getElementById("modeText");

let board, currentPlayer, gameOver;
let vsAI = true;
let aiLevel = "medium";

let score = {
  win: +localStorage.getItem("ttt_win") || 0,
  loss: +localStorage.getItem("ttt_loss") || 0,
  draw: +localStorage.getItem("ttt_draw") || 0
};

document.getElementById("win").innerText = score.win;
document.getElementById("loss").innerText = score.loss;
document.getElementById("draw").innerText = score.draw;

const wins = [
 [0,1,2],[3,4,5],[6,7,8],
 [0,3,6],[1,4,7],[2,5,8],
 [0,4,8],[2,4,6]
];

function init(){
    board = Array(9).fill("");
    currentPlayer = "X";
    gameOver = false;
    statusEl.innerText = "Player X Turn";
    boardEl.innerHTML = "";
    board.forEach((_,i)=>{
        const c = document.createElement("div");
        c.className = "cell";
        c.onclick = ()=>move(i);
        boardEl.appendChild(c);
    });
}
init();

function move(i){
    if(board[i] || gameOver) return;

    board[i] = currentPlayer;
    render();

    const winLine = wins.find(w=>w.every(j=>board[j]===currentPlayer));
    if(winLine){
        winLine.forEach(j=>boardEl.children[j].classList.add("win"));
        statusEl.innerText = `üéâ Player ${currentPlayer} Wins!`;
        if(vsAI){
            currentPlayer==="X" ? score.win++ : score.loss++;
        }
        saveScore();
        gameOver = true;
        return;
    }

    if(board.every(v=>v)){
        statusEl.innerText = "ü§ù Match Draw";
        score.draw++;
        saveScore();
        gameOver = true;
        return;
    }

    currentPlayer = currentPlayer==="X" ? "O" : "X";
    statusEl.innerText = vsAI && currentPlayer==="O" ? "ü§ñ AI Thinking..." : `Player ${currentPlayer} Turn`;

    if(vsAI && currentPlayer==="O"){
        setTimeout(()=>move(aiLevel==="hard"?bestMove():mediumMove()),500);
    }
}

function mediumMove(){
    const empty = board.map((v,i)=>v===""?i:null).filter(v=>v!==null);
    if(Math.random()<0.4) return empty[Math.floor(Math.random()*empty.length)];
    return bestMove();
}

function bestMove(){
    let best=-Infinity, move;
    board.forEach((v,i)=>{
        if(v===""){
            board[i]="O";
            let s=minimax(board,0,false);
            board[i]="";
            if(s>best){best=s;move=i;}
        }
    });
    return move;
}

function minimax(b,d,isMax){
    const res = checkResult();
    if(res!==null) return res==="O"?10-d:res==="X"?d-10:0;
    let best = isMax?-Infinity:Infinity;
    b.forEach((v,i)=>{
        if(v===""){
            b[i]=isMax?"O":"X";
            best = isMax?Math.max(best,minimax(b,d+1,false))
                        :Math.min(best,minimax(b,d+1,true));
            b[i]="";
        }
    });
    return best;
}

function checkResult(){
    for(let w of wins){
        if(board[w[0]] && w.every(i=>board[i]===board[w[0]])) return board[w[0]];
    }
    return board.includes("")?null:"draw";
}

function render(){
    [...boardEl.children].forEach((c,i)=>{
        c.innerText = board[i];
        c.className = "cell "+board[i];
    });
}

function saveScore(){
    localStorage.setItem("ttt_win",score.win);
    localStorage.setItem("ttt_loss",score.loss);
    localStorage.setItem("ttt_draw",score.draw);
    document.getElementById("win").innerText=score.win;
    document.getElementById("loss").innerText=score.loss;
    document.getElementById("draw").innerText=score.draw;
}

function restartGame(){init();}

function toggleMode(){
    vsAI = !vsAI;
    if(vsAI){
        modeIcon.innerText="ü§ñ";
        modeText.innerText="AI Bot";
        aiLevels.style.display="flex";
    }else{
        modeIcon.innerText="üë•";
        modeText.innerText="Friend";
        aiLevels.style.display="none";
    }
    restartGame();
}

function setLevel(lvl){
    aiLevel = lvl;
    document.getElementById("mediumBtn").classList.remove("active");
    document.getElementById("hardBtn").classList.remove("active");
    document.getElementById(lvl+"Btn").classList.add("active");
    restartGame();
}
</script>

</body>
</html>